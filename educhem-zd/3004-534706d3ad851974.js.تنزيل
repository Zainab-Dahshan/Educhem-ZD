"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3004],{76078:function(e,n,t){t.d(n,{Z:function(){return v}});var a=t(26042),i=t(69396),s=t(10253),o=t(85893),l=t(67294),r=t(46440),d=t(72510),c=t(2740),u=t(11355),m=t(69737),p=t(3732),h=t(66261),x=t(66605),g=function(e,n){var t=(0,l.useState)(n),a=t[0],i=t[1];return(0,l.useEffect)((function(){var n,t=function(n){var t=Array.isArray(e)?e:[e],a=!0;t.forEach((function(e){null!==e.current&&e.current.contains(n.target)&&(a=!1)})),a&&i(!1)};a&&(window.addEventListener("click",t),window.top.addEventListener("click",t),null===(n=window.preview)||void 0===n||n.addEventListener("click",t));return function(){var e;window.removeEventListener("click",t),window.top.removeEventListener("click",t),null===(e=window.preview)||void 0===e||e.removeEventListener("click",t)}}),[a,e]),[a,i]};function v(e){var n=e.className,t=e.icon,v=e.iconClassName,b=e.button,f=e.buttonClassName,w=e.openClassName,j=e.iconOpenClassName,y=e.children,N=e.inline,k=e.itemsContainerClass,C=e.mobileContent,P=e.mobileTitle,E=e.tooltip,S=e.disabled,Z=e.placementAlign,I=void 0===Z?"end":Z,A=e.onOpen,M=e.onButtonClick,T=e.closeOnSelect,F=e.show,K=void 0===F||F,O=e.portal,L=void 0===O||O,B=e.dataTour,R=e.onClose,D=e.showCloseButton,V=void 0===D||D,z=(0,p.ac)("(min-width: 1024px)"),W=(0,l.useState)(null),_=W[0],H=W[1],q=(0,l.useState)(null),Q=q[0],U=q[1],X=(0,l.useRef)(null),G=(0,l.useRef)(null),J=(0,s.Z)(g(X,!1),2),Y=J[0],$=J[1],ee=(0,r.D)(_,Q,{placement:"bottom-".concat(I),modifiers:[{name:"flip",options:{allowedAutoPlacements:["top-start","bottom-start","top-end","bottom-end"]}},{name:"offset",options:{offset:[0,8]}}]}),ne=ee.styles,te=ee.attributes,ae=function(e){e.stopPropagation(),$(!Y);var n=new Event("click",{bubbles:!0});document.dispatchEvent(n),"function"===typeof M&&M(e)},ie=function(){Y&&($(!1),"function"===typeof R&&R())},se=function(){return(0,o.jsx)(d.v.Button,{ref:H,className:(0,p.AK)(f,Y?w:"","z-5"),disabled:S,onClick:ae,children:b||(0,o.jsx)(h.Z,{icon:t||"DotsVerticalIcon",className:(0,p.AK)(v,"h-5 w-5",Y?j||"text-indigo-500":!v&&"text-gray-500")})})};(0,l.useEffect)((function(){return"function"===typeof A&&A(Y),window.top.addEventListener("dropdown-open",ie),window.top.addEventListener("close-dropdown",ie),function(){window.top.removeEventListener("dropdown-open",ie),window.top.removeEventListener("close-dropdown",ie)}}),[Y]);var oe=L?c.h:l.Fragment;return(0,l.useEffect)((function(){!1===Y&&"function"===typeof R&&R()}),[Y]),(0,o.jsx)(d.v,{"data-tour":B,ref:X,as:"div",className:(0,p.AK)("relative inline-block text-left",n),onClick:function(e){return e.stopPropagation()},children:function(e){e.open;return(0,o.jsxs)(o.Fragment,{children:[E?(0,o.jsx)(x.Z,{alt:E,disabled:S,children:se()}):se(),(0,o.jsx)(oe,{children:z?(0,o.jsx)("div",(0,i.Z)((0,a.Z)({className:(0,p.AK)("z-100 transition-opacity",K?"opacity-100":"opacity-0"),ref:G,style:ne.popper},te.popper),{children:(0,o.jsx)(u.u,{show:Y,as:l.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",beforeEnter:function(){return U(G.current)},afterLeave:function(){return U(null)},children:(0,o.jsx)(d.v.Items,{static:!0,className:(0,p.AK)(N?"static":"absolute","origin-top-right z-10 right-0 mt-1 w-full min-w-50 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none overflow-hidden",k),onClick:function(){return T&&$(!1)},children:y})})})):(0,o.jsx)(u.u.Root,{show:Y,as:l.Fragment,children:(0,o.jsx)(m.V,{as:"div",className:"fixed z-100 inset-0 overflow-y-auto",onClose:function(){return $(!1)},children:(0,o.jsxs)("div",{className:"flex items-end justify-center h-full text-center",children:[(0,o.jsx)(u.u.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 backdrop-blur-2xs transition-opacity",onClick:function(){return $(!1)}})}),(0,o.jsx)(u.u.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4",enterTo:"opacity-100 translate-y-0",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-4",children:(0,o.jsxs)("div",{className:(0,p.AK)("w-full bg-white pt-2 text-left overflow-hidden shadow-xl transform transition-all",C?"flex flex-col h-full":"block rounded-t-lg",!V&&"pb-6"),children:[C&&(0,o.jsx)("div",{className:"flex-1 flex justify-center items-center p-10",children:C}),P&&(0,o.jsxs)("div",{className:"flex md:hidden items-center justify-between gap-3 pl-4 pr-2 pt-1 pb-2 border-b",children:[(0,o.jsx)("p",{className:"font-semibold py-2",children:P}),(0,o.jsx)("button",{className:"light icon transparent",onClick:function(){return $(!1)},children:(0,o.jsx)(h.Z,{icon:"XIcon",className:"w-5 h-5"})})]}),(0,o.jsx)("div",{className:(0,p.AK)("flex flex-col overflow-hidden",k),children:(0,o.jsx)(d.v.Items,{onClick:function(){return T&&$(!1)},children:y})}),V&&(0,o.jsx)("div",{className:"p-4",children:(0,o.jsx)("button",{className:"light lg w-full",onClick:function(){return $(!1)},children:"Close"})})]})})]})})})})]})}})}},57713:function(e,n,t){t.d(n,{Z:function(){return d}});var a=t(85893),i=(t(67294),t(3732)),s=t(66261),o=t(52077),l=t(12002),r=t(19810);function d(e){var n=e.track,t=e.website,o=e.dirty,d=e.pages,m=e.selectedPage,p=e.selectedPost,h=e.loading,x=e.blogMode,g=e.postMode,v=e.generating,b=(e.openAssistant,e.setOpenAssistant,e.openSupport),f=e.isOpenSupport,w=e.handleOpenManage,j=e.handleOpenManagePage,y=e.onView,N=e.openChangeTemplate,k=e.setOpenChangeTemplate,C=e.setOpenRegenerate,P=e.onSelectPage,E=e.onExit;return!N&&(0,a.jsxs)(a.Fragment,{children:[g&&(0,a.jsx)(u,{selectedPost:p,loading:v}),(0,a.jsx)("nav",{className:"sticky left-0 bottom-0 z-50 md:hidden w-full bg-white border-t",children:(0,a.jsxs)("div",{className:"grid grid-cols-auto justify-between max-w-120 mx-auto",children:[(0,a.jsx)(c,{blogMode:x,postMode:g,disabled:h||o,onExit:E}),x||g?(0,a.jsxs)("button",{className:"light transparent flex-col gap-1 !rounded-none",disabled:h||v,onClick:function(){g?window.settingsPost():window.editBlock("blog")},children:[(0,a.jsx)(s.Z,{icon:"Cog8ToothIcon",className:"w-5 h-5"}),(0,a.jsx)("span",{className:"text-body-xs",children:"Settings"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{dataTour:"theme-mobile",buttonClassName:"flex-col gap-1 !rounded-none",disabled:h||v,onSelect:function(e,t,a){switch(t){case"tab":w(e,"style",a);break;case"widget":w(e,"widget");break;case"template":n("website:change-template"),k(!N);break;case"blocks":w(e,"blocks");break;case"regenerate":n("website:regenerate"),setTimeout((function(){return C(!0)}),100)}},disableTemplates:!!(null===m||void 0===m?void 0:m.slug)||o}),(0,a.jsx)(r.Z,{buttonClassName:"flex-col gap-1 w-full !rounded-none",pages:d,selectedPage:m,disabled:o||h||v,onAdd:j,onSelect:P,dataTour:"pages-mobile"})]}),(0,a.jsxs)("button",{className:(0,i.AK)("light transparent flex-col gap-1 !rounded-none",f&&"!bg-gray-100"),disabled:h||v,onClick:function(){return b()},children:[(0,a.jsx)(s.Z,{icon:"QuestionMarkCircleSolidIcon",className:"w-5 h-5","aria-hidden":"true"}),(0,a.jsx)("span",{className:"text-body-xs",children:"Help"})]}),"public"!==(null===t||void 0===t?void 0:t.status)&&(0,a.jsxs)("button",{className:"light transparent flex-col gap-1 !rounded-none",disabled:h||v,onClick:y,children:[(0,a.jsx)(s.Z,{icon:"ArrowTopRightOnSquareIcon",className:"w-5 h-5","aria-hidden":"true"}),(0,a.jsx)("span",{className:"text-body-xs",children:"public"===(null===t||void 0===t?void 0:t.status)?"View":"Preview"})]})]})})]})}var c=function(e){var n=e.disabled,t=e.blogMode,i=e.postMode,o=e.onExit;return(0,a.jsxs)("button",{className:"light transparent flex-col gap-1 !rounded-none",disabled:n,onClick:function(){i?window.dispatchEvent(new CustomEvent("website-builder-post-exit")):o("/dashboard")},children:[(0,a.jsx)(s.Z,{icon:t||i?"ChevronLeftIcon":"HomeRoofSolidIcon",className:"w-5 h-5","aria-hidden":"true"}),(0,a.jsx)("span",{className:"text-body-xs",children:i?"Blog":t?"Website":"Home"})]})},u=function(e){var n=e.selectedPost,t=e.loading;return(null===n||void 0===n?void 0:n._id)||"assistant"===(null===n||void 0===n?void 0:n.status)||(null===n||void 0===n?void 0:n.fromScratch)?null:(0,a.jsx)("div",{className:"sticky inset-x-0 md:hidden bottom-0 border-t",children:(0,a.jsx)(o.Z,{className:"flex-shrink-0 light xl gap-2 w-full !border-0 !rounded-none",loading:t,force:t,onClick:function(){window.dispatchEvent(new CustomEvent("website-builder-post-regenerate"))},children:"Regenerate post"})})}},12002:function(e,n,t){t.d(n,{Z:function(){return r}});var a=t(85893),i=(t(67294),t(72510)),s=t(76078),o=t(3732),l=t(66261);function r(e){var n=e.disabled,t=e.className,r=e.buttonClassName,d=e.dataTour,c=e.onSelect,u=e.disableTemplates;return(0,a.jsx)(s.Z,{mobileTitle:"Customize",dataTour:d,inline:!0,className:(0,o.AK)("text-center",t),buttonClassName:(0,o.AK)("button light transparent whitespace-nowrap",r),openClassName:"!bg-gray-100",itemsContainerClass:"p-1",placementAlign:"start",button:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"md:p-1 md:rounded-md md:bg-gray-100",children:(0,a.jsx)(l.Z,{icon:"PaintBrushSolidIcon",className:"w-5 md:w-4 h-5 md:h-4","aria-hidden":"true"})}),(0,a.jsx)("span",{className:"block md:hidden lg:block text-body-xs md:text-label pr-1",children:"Customize"})]}),disabled:n,closeOnSelect:!0,showCloseButton:!1,children:[{icon:"ArrowPathIcon",label:"Change template",action:"template"},{tab:1,icon:"ColorPaletteIcon",label:"Colors",action:"tab"},{tab:4,icon:"FontsIcon",label:"Fonts",action:"tab"},{tab:3,icon:"ButtonIcon",label:"Buttons",action:"tab"},{tab:6,icon:"StyleIcon",label:"Other styles",action:"tab"},{icon:"SquaresIcon",label:"Widgets",action:"widget"},{icon:"StarsIcon",label:"Regenerate",action:"regenerate"}].map((function(e,n){return(0,a.jsx)(i.v.Item,{as:"div",className:(0,o.AK)("items-center gap-2 px-4 py-3 rounded-sm hover:bg-gray-100 text-gray-700 cursor-pointer",e.hideMobile?"hidden lg:flex":"flex",u&&"template"===e.action&&"hidden"),disabled:u&&"template"===e.action,onClick:function(n){c(n,e.action,e.tab)},children:(0,a.jsxs)("div",{className:"flex gap-3 flex-grow",children:[(0,a.jsx)(l.Z,{icon:e.icon,variant:e.variant,className:"w-5 h-5 text-gray-700","aria-hidden":"true"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.label})]})},"customize-option-".concat(n))}))})}},19810:function(e,n,t){t.d(n,{Z:function(){return d}});var a=t(85893),i=t(76078),s=t(3732),o=t(66261),l=t(72510),r=t(67294);function d(e){var n=e.pages,t=e.selectedPage,d=e.className,c=e.buttonClassName,u=e.disabled,m=e.onAdd,p=e.onSelect,h=e.dataTour,x=(0,r.useState)([]),g=x[0],v=x[1],b=g.sort((function(e,n){return e.order-n.order})).slice(0,5);return(0,r.useEffect)((function(){if(n){var e=n.map((function(e){return"parent"===e.type&&e.id&&(e.nests=n.filter((function(n){return n.Parent===e.id})).sort((function(e,n){return e.order-n.order}))),e})).filter((function(e){return"nested"!==e.type}));v(e)}}),[n]),(0,a.jsxs)(i.Z,{mobileTitle:"Pages",inline:!0,className:(0,s.AK)("text-center",d),buttonClassName:(0,s.AK)("button light transparent whitespace-nowrap",c),openClassName:"!bg-gray-100",itemsContainerClass:"p-1",button:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"md:p-1 md:rounded-md md:bg-gray-100",children:(0,a.jsx)(o.Z,{icon:"WindowSolidIcon",className:"w-5 md:w-4 h-5 md:h-4","aria-hidden":"true"})}),(0,a.jsx)("span",{className:"block md:hidden lg:block text-body-xs md:text-label",children:"Pages"})]}),disabled:u,dataTour:h,closeOnSelect:!0,placementAlign:"start",showCloseButton:!1,children:[(0,a.jsx)("div",{className:"space-y-0.5 md:max-h-[calc(100vh-164px)] overflow-y-auto no-scrollbar",children:b.map((function(e,n){return(0,a.jsxs)(l.v.Item,{as:"div",className:(0,s.AK)("parent"===e.type?"":"px-3 py-2 rounded-sm hover:bg-gray-100 cursor-pointer",e.id===(null===t||void 0===t?void 0:t.id)?"bg-indigo-50 text-indigo-600":"text-gray-700"),onClick:function(){return"parent"!==e.type&&p(e.id)},children:[(0,a.jsxs)("div",{className:(0,s.AK)("flex items-center gap-3","parent"===e.type&&"px-3 py-2"),children:[(0,a.jsx)(o.Z,{icon:null===e.slug?"HomeRoofSolidIcon":"WindowIcon",className:"w-5 h-5","aria-hidden":"true"}),(0,a.jsx)("div",{className:"flex-1 text-sm font-medium md:max-w-30 truncate",children:e.name}),e.id===(null===t||void 0===t?void 0:t.id)&&(0,a.jsx)(o.Z,{icon:"CheckCircleSolidIcon",className:"w-5 h-5","aria-hidden":"true"})]}),e.nests&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"relative flex flex-col gap-0.5",children:[(0,a.jsx)("div",{className:"absolute inset-y-2 left-[21.5px] w-px bg-gray-200 pointer-events-none"}),e.nests.map((function(e,n){return(0,a.jsxs)(l.v.Item,{as:"div",className:(0,s.AK)("group flex items-center gap-3 px-3 py-2 rounded-sm hover:bg-gray-100 cursor-pointer",e.id===(null===t||void 0===t?void 0:t.id)?"bg-indigo-50 text-indigo-600":"text-gray-700"),onClick:function(){return p(e.id)},children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-5 h-5",children:(0,a.jsx)("div",{className:(0,s.AK)("relative z-10 w-0.5 h-5 rounded-xs",e.id===(null===t||void 0===t?void 0:t.id)?"bg-indigo-600":"bg-gray-700 opacity-0 transition-opacity group-hover:opacity-100")})}),(0,a.jsx)("div",{className:"flex-1 text-sm font-medium md:max-w-30 truncate",children:e.name}),e.id===(null===t||void 0===t?void 0:t.id)&&(0,a.jsx)(o.Z,{icon:"CheckCircleSolidIcon",className:"w-5 h-5","aria-hidden":"true"})]},"page-nest-".concat(n))}))]})})]},"page-".concat(n))}))}),(0,a.jsx)("hr",{className:"my-1"}),(0,a.jsxs)(l.v.Item,{as:"div",className:"flex items-center gap-3 px-3 py-2 mb-0.5 rounded-sm hover:bg-gray-100 text-gray-700 cursor-pointer",onClick:function(){return m(!0,!1)},children:[(0,a.jsx)(o.Z,{icon:"FolderOpenIcon",className:"w-5 h-5","aria-hidden":"true"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:g.length>4?"View all pages":"Manage pages"})]}),(0,a.jsxs)(l.v.Item,{as:"div",className:"flex items-center gap-3 px-3 py-2 rounded-sm hover:bg-gray-100 text-indigo-600 cursor-pointer",onClick:function(){return m(!1,!0)},children:[(0,a.jsx)(o.Z,{icon:"DocumentPlusSolidIcon",className:"w-5 h-5","aria-hidden":"true"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Create page"})]})]})}},51247:function(e,n,t){t.d(n,{Z:function(){return x}});var a=t(26042),i=t(69396),s=t(85893),o=t(67294),l=t(3732),r=t(66261),d=t(52077),c=t(12002),u=t(19810),m=t(66605);function p(e){var n=e.device,t=void 0===n?"desktop":n,a=e.onChange,i=(0,o.useState)(t),d=i[0],c=i[1],u=[{device:"desktop",icon:"ComputerDesktopIcon",label:"Desktop",canView:(0,l.ac)("(min-width: 1024px)")},{device:"tablet",icon:"DeviceTabletIcon",label:"Tablet",canView:(0,l.ac)("(min-width: 860px)")},{device:"mobile",icon:"DevicePhoneMobileIcon",label:"Phone",canView:!0}].filter((function(e){return e.canView}));return(0,o.useEffect)((function(){c(t)}),[t]),(0,s.jsx)("div",{className:"flex items-center gap-2",children:u.map((function(e,n){return(0,s.jsx)(m.Z,{title:e.label,children:(0,s.jsx)("button",{className:"light icon transparent",onClick:function(){return function(e){a(e),window.dispatchEvent(new CustomEvent("website-builder-simulate-device",{detail:{device:e}}))}(e.device)},children:(0,s.jsx)(r.Z,{icon:e.icon,className:(0,l.AK)("w-5 h-5",d!==e.device&&"text-gray-400"),from:"heroicons","aria-hidden":"true"})})},"view-port-device-".concat(n))}))})}var h=t(11355);function x(e){var n,t=e.track,a=e.website,i=e.loading,o=e.disabled,d=e.generating,m=e.generatingPost,p=e.dirty,x=e.blogMode,P=e.postMode,E=e.pages,S=e.selectedPage,Z=e.selectedBlock,I=e.selectedPost,A=e.openManage,M=e.handleOpenManage,T=e.handleOpenPostAssistant,F=e.handleViewWebsite,K=(e.openAssistant,e.setOpenAssistant,e.openSupport),O=e.handleOpenManagePage,L=e.openManagePages,B=e.openManagePost,R=e.onExit,D=e.onDiscard,V=e.onSave,z=e.setOpenChangeTemplate,W=e.openChangeTemplate,_=e.setOpenRegenerate,H=e.onSelectPage,q=e.previewMode,Q=e.setPreviewMode;return(0,s.jsxs)("div",{className:(0,l.AK)("sticky left-0 top-0 z-50 flex md:grid grid-cols-4 md:grid-cols-5 items-center justify-between gap-3 p-2 md:py-3 md:px-6 bg-white border-b md:border-0 md:shadow md:transition-all duration-750 transform-gpu",(x||P)&&"md:flex",L&&"pointer-events-none",W&&"opacity-0 -translate-y-full pointer-events-none"),children:[(0,s.jsxs)("div",{className:"col-span-2 flex items-center gap-1.5 md:hidden",children:[(0,s.jsx)(N,{postMode:P,selectedPage:S}),x?!P&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y,{}),(0,s.jsx)(k,{disabled:p||i||d,onClick:function(){return T()}})]}):null]}),(0,s.jsxs)("div",{className:"col-span-2 hidden md:flex items-center gap-1.5",children:[(0,s.jsx)(v,{blogMode:x,postMode:P,disabled:i||p,onExit:R}),(0,s.jsxs)(h.u,{as:"div",className:"flex items-center gap-1.5",show:!(null===q||void 0===q?void 0:q.active),enter:"transition-all duration-300",enterFrom:"opacity-0 -translate-x-3",enterTo:"opacity-100 translate-x-0",leave:"transition-all duration-300",leaveFrom:"opacity-100 translate-x-0",leaveTo:"opacity-0 -translate-x-3",children:[(0,s.jsx)(y,{}),x&&("assistant"!==(null===I||void 0===I?void 0:I.status)?(0,s.jsxs)("button",{className:(0,l.AK)("light icon transparent gap-2 !py-1.5 !ring-0 !ring-transparent",(A&&"blog"===(null===Z||void 0===Z||null===(n=Z.WebsiteBlock)||void 0===n?void 0:n.type)||B)&&"!bg-gray-100"),disabled:i||d||m,onClick:function(){P?window.settingsPost():window.editBlock("blog")},children:[(0,s.jsx)("div",{className:"p-1 rounded-md bg-gray-100",children:(0,s.jsx)(r.Z,{icon:"Cog8ToothIcon",className:"w-4 h-4","aria-hidden":"true"})}),(0,s.jsx)("span",{className:"block md:hidden lg:block text-body-xs md:text-label pr-1",children:"Settings"})]}):null),x&&!P&&(0,s.jsx)(k,{disabled:p||i||d,onClick:function(){return T()}}),!x&&!P&&(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(c.Z,{dataTour:"theme",buttonClassName:"icon gap-2 !py-1.5 !ring-0 !ring-transparent",disabled:i||d,disableTemplates:!!(null===S||void 0===S?void 0:S.slug)||p,onSelect:function(e,n,a){switch(n){case"tab":M(e,"style",a);break;case"widget":M(e,"widget");break;case"template":t("website:change-template"),z(!W);break;case"blocks":M(e,"blocks");break;case"regenerate":t("website:regenerate"),_(!0)}}}),(0,s.jsx)(u.Z,{buttonClassName:"icon gap-2 !py-1.5 !ring-0 !ring-transparent",pages:E,selectedPage:S,disabled:p||i||d,onAdd:O,onSelect:H,dataTour:"pages"}),(0,s.jsxs)("button",{className:"light icon transparent gap-2 !py-1.5 !ring-0 !ring-transparent",disabled:i,onClick:function(){return K()},children:[(0,s.jsx)("div",{className:"p-1 rounded-md bg-gray-100",children:(0,s.jsx)(r.Z,{icon:"QuestionMarkCircleSolidIcon",className:"w-4 h-4","aria-hidden":"true"})}),(0,s.jsx)("span",{className:"block md:hidden lg:block text-body-xs md:text-label pr-1",children:"Help"})]})]})]})]}),(0,s.jsxs)("div",{className:"col-span-1 hidden md:flex items-center md:justify-center gap-3",children:[P&&(0,s.jsx)(j,{selectedPost:I,loading:m}),(0,s.jsx)(g,{selectedPage:S,postMode:P,previewMode:q,setPreviewMode:Q})]}),(0,s.jsx)("div",{className:"col-span-2 flex items-center justify-end gap-3",children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b,{postMode:P,disabled:i||m,onDiscard:D}),(0,s.jsx)(f,{postMode:P,loading:i,disabled:!p||o||i||d||m,onSave:V})]}):(0,s.jsx)(s.Fragment,{children:(null===I||void 0===I?void 0:I._id)&&P?(0,s.jsx)(w,{disabled:i,loading:i,selectedPost:I}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(C,{previewMode:q,setPreviewMode:Q,disabled:i||(null===q||void 0===q?void 0:q.loading)}),(0,s.jsx)(y,{className:"hidden lg:flex"}),"public"===(null===a||void 0===a?void 0:a.status)?(0,s.jsxs)("button",{"data-tour":"preview",className:"flex-shrink-0 primary sm gap-2",onClick:function(){return F()},children:[(0,s.jsx)(r.Z,{icon:"ArrowTopRightOnSquareIcon",className:"w-5 h-5","aria-hidden":"true"}),(0,s.jsx)("span",{className:"hidden md:block",children:"View website"})]}):(0,s.jsxs)("button",{className:"flex-shrink-0 primary sm gap-2",onClick:function(){return F(!0,!1)},children:[(0,s.jsx)(r.Z,{icon:"RocketLaunchIcon",className:"w-4 h-4","aria-hidden":"true"}),(0,s.jsx)("span",{children:"Publish"})]})]})})})]})}var g=function(e){var n=e.previewMode,t=e.setPreviewMode,l=e.selectedPage,r=e.postMode,d=(0,o.useState)(!0),c=d[0],u=d[1],m=(0,o.useState)(!1),x=m[0],g=m[1];return(0,o.useEffect)((function(){(null===n||void 0===n?void 0:n.active)?u(!1):(g(!1),setTimeout((function(){return u(!0)}),400))}),[n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.u,{as:"div",show:c,enter:"transition-all duration-300",enterFrom:"opacity-0 -translate-y-3",enterTo:"opacity-100 translate-y-0",leave:"transition-all duration-300",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-3",afterLeave:function(){return g(!0)},children:(0,s.jsx)(N,{selectedPage:l,postMode:r})}),(0,s.jsx)(h.u,{as:"div",show:x,enter:"transition-all duration-300",enterFrom:"opacity-0 -translate-y-3",enterTo:"opacity-100 translate-y-0",leave:"transition-all duration-300",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-3",children:(0,s.jsx)(p,{device:null===n||void 0===n?void 0:n.device,onChange:function(e){return t((0,i.Z)((0,a.Z)({},n),{device:e}))}})})]})},v=function(e){var n=e.className,t=e.disabled,a=e.blogMode,i=e.postMode,o=e.onExit;return(0,s.jsxs)("button",{className:(0,l.AK)("flex-shrink-0 light icon transparent gap-2",n),disabled:t,onClick:function(){i?window.dispatchEvent(new CustomEvent("website-builder-post-exit")):o("/dashboard")},children:[(0,s.jsx)(r.Z,{icon:a||i?"ChevronLeftIcon":"HomeSolidIcon",className:"w-5 h-5","aria-hidden":"true"}),a&&(0,s.jsx)("span",{className:"text-label",children:i?"Blog":"Website"})]})},b=function(e){var n=e.postMode,t=e.disabled,a=e.onDiscard;return(0,s.jsx)("button",{className:"flex-shrink-0 light sm",disabled:t,onClick:function(){n?window.dispatchEvent(new CustomEvent("website-builder-post-discard")):a()},children:"Discard"})},f=function(e){var n=e.postMode,t=e.disabled,a=e.loading,i=e.onSave;return(0,s.jsx)(d.Z,{className:"flex-shrink-0 primary sm",disabled:t,loading:a,onClick:function(){n?window.dispatchEvent(new CustomEvent("website-builder-post-save")):i()},children:"Save"})},w=function(e){var n=e.selectedPost,t=e.disabled,a=e.loading;return(0,s.jsxs)(d.Z,{className:(0,l.AK)("flex-shrink-0 gap-2 sm",(null===n||void 0===n?void 0:n.published)?"light":"secondary"),disabled:t,loading:a,onClick:function(){window.dispatchEvent(new CustomEvent("website-builder-post-toggle-published"))},children:[(0,s.jsx)(r.Z,{icon:"DocumentTextSolidIcon",className:"w-5 h-5","aria-hidden":"true"}),(0,s.jsxs)("span",{children:[(null===n||void 0===n?void 0:n.published)?"Unpublish":"Publish"," post"]})]})},j=function(e){var n=e.selectedPost,t=e.loading;return(null===n||void 0===n?void 0:n._id)||"assistant"===(null===n||void 0===n?void 0:n.status)||(null===n||void 0===n?void 0:n.fromScratch)?null:(0,s.jsxs)(d.Z,{className:"flex-shrink-0 light sm gap-2",loading:t,force:t,onClick:function(){window.dispatchEvent(new CustomEvent("website-builder-post-regenerate"))},children:[(0,s.jsx)(r.Z,{icon:"BoltIcon",className:"w-5 h-5","aria-hidden":"true"}),(0,s.jsx)("span",{children:"Regenerate"})]})},y=function(e){var n=e.className;return(0,s.jsx)("div",{className:(0,l.AK)("flex-shrink-0 mx-0 w-px h-6 bg-gray-200",n)})},N=function(e){var n=e.selectedPage,t=e.postMode;return(0,s.jsxs)("div",{className:"flex items-center gap-2 pr-2 md:pr-0",children:[(0,s.jsx)("div",{className:"md:hidden p-1 rounded-md bg-gray-100",children:(0,s.jsx)(r.Z,{icon:"WindowSolidIcon",className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"max-w-30 xl:max-w-60 whitespace-nowrap overflow-hidden overflow-ellipsis",children:t?"Post":(null===n||void 0===n?void 0:n.name)||(null===n||void 0===n?void 0:n.label)||"Page"})]})},k=function(e){var n=e.disabled,t=e.onClick;return(0,s.jsxs)("button",{className:"flex-shrink-0 secondary icon transparent gap-2 !py-1.5 !ring-0 !ring-transparent",disabled:n,onClick:t,children:[(0,s.jsx)("div",{className:"p-1 rounded-md bg-indigo-50",children:(0,s.jsx)(r.Z,{icon:"PlusSolidIcon",className:"w-4 h-4","aria-hidden":"true"})}),(0,s.jsx)("span",{className:"text-label text-gray-900 pr-1",children:"Add post"})]})},C=function(e){var n=e.previewMode,t=e.setPreviewMode,d=e.disabled,c=(0,o.useState)(!1),u=c[0],m=c[1];return(0,o.useEffect)((function(){var e=function(){return m(!1)};return window.addEventListener("website-builder-preview-loaded",e),function(){window.removeEventListener("website-builder-preview-loaded",e)}}),[]),(0,s.jsxs)("div",{className:"hidden lg:flex items-center gap-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Preview"}),(0,s.jsx)("div",{className:(0,l.AK)("flex p-0.5 rounded-sm shadow-inner transition-all duration-300",(null===n||void 0===n?void 0:n.active)?"pl-7 bg-green-200":"pr-7 bg-gray-100",u||d?"pointer-events-none cursor-not-allowed":"cursor-pointer"),onClick:function(){u||d||(t((0,i.Z)((0,a.Z)({},n),{active:!(null===n||void 0===n?void 0:n.active)})),m(!0),setTimeout((function(){return m(!1)}),1e4))},children:(0,s.jsx)("div",{className:(0,l.AK)("p-2 rounded-sm shadow-sm",u||d?"bg-gray-50 text-gray-500":"bg-white text-gray-700"),children:(0,s.jsx)(r.Z,{icon:(null===n||void 0===n?void 0:n.active)?"EyeIcon":"EyeSlashIcon",from:"heroicons",className:"w-3 h-3"})})})]})}}}]);